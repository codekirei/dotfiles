#!/usr/bin/env sh

# get name of primary branch, usually `main` or `master`
PRIMARY_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD | rev | cut -d'/' -f1 | rev)

git branch --merged | grep -Ev "$PRIMARY_BRANCH" | xargs git branch -d

### NOTE
# if you get this error in a new repo:
# > fatal: ref refs/remotes/origin/HEAD is not a symbolic ref
# run this to fix it:
# > git fetch origin --prune
# > git remote set-head origin --auto
